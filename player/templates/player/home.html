{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproductor de Música</title>
    <link rel="stylesheet" href="{% static 'player/style.css' %}">
</head>
<body>
    <div class="container">
        <h1 id="songTitle">Asereje</h1>
        
        <img id="cover" src="{% static 'covers/cover1.jpg' %}" alt="Portada de la canción">

        <audio id="audioPlayer" controls>
            <source id="audioSource" src="{% static 'songs/song1.mp3' %}" type="audio/mpeg">
            Tu navegador no soporta el audio.
        </audio>

        <div class="controls">
            <button onclick="prevSong()" aria-label="Anterior">
                <span>&#9664;&#9664;</span>
            </button>
            <button id="playPause" onclick="togglePlayPause()" aria-label="Reproducir/Pausar">
                <span id="playPauseIcon">&#9654;</span> <!-- Cambia el icono según el estado -->
            </button>
            <button onclick="nextSong()" aria-label="Siguiente">
                <span>&#9654;&#9654;</span>
            </button>
        </div>
    </div>
    <script>
        const songs = [
            { title: "Asereje", file: "{% static 'songs/song1.mp3' %}", cover: "{% static 'covers/cover1.jpg' %}" },
            { title: "Torero", file: "{% static 'songs/song2.mp3' %}", cover: "{% static 'covers/cover2.jpg' %}" },
            { title: "Un velero llamado libertad", file: "{% static 'songs/song3.mp3' %}", cover: "{% static 'covers/cover3.jpg' %}" }
        ];

        let currentSongIndex = 0;
        let audio = document.getElementById("audioPlayer");
        let source = document.getElementById("audioSource");
        let cover = document.getElementById("cover");
        let songTitle = document.getElementById("songTitle");
        let playPauseButton = document.getElementById("playPause");

        function changeSong(index) {
            if (index < 0) {
                currentSongIndex = songs.length - 1;
            } else if (index >= songs.length) {
                currentSongIndex = 0;
            } else {
                currentSongIndex = index;
            }

            source.src = songs[currentSongIndex].file;
            cover.src = songs[currentSongIndex].cover;
            songTitle.innerText = songs[currentSongIndex].title;
            audio.load();
            audio.play();
            playPauseButton.innerText = "⏸️";
        }

        function nextSong() {
            changeSong(currentSongIndex + 1);
        }

        function prevSong() {
            changeSong(currentSongIndex - 1);
        }

        function togglePlayPause() {
            if (audio.paused) {
                audio.play();
                playPauseButton.innerText = "⏸️";
            } else {
                audio.pause();
                playPauseButton.innerText = "▶️";
            }
        }
    </script>
<script src="{% static 'player/player.js' %}"></script>
</body>
</html>
